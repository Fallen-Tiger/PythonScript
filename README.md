# PythonScript
多线程访问mongo的python脚本
1. 对于skip(1000).limit(1000)的多线程访问方式其中的skip函数需要消耗大量时间，无法显著提升速度
2. mongo中每条数据都会包含_id信息，由时间片、机器id、进程id、数据号组成，而且_id在创建数据时便建立索引，B+树对于范围查询有良好的支持
3. 首先获取_id的最大值和最小值
4. 通过二分法对_id进行划分，如果划分不均匀，例如左边数量大于右边数量的1/10就对左边再次进行划分，知道左右数量达到均匀为止
5. 如果需要划分成2的n次方份，调用n次split_2即可
6. 最终效果为一个包含2^n+1长度的数组
7. 数组将数据分成均匀的数量，可以使用每个线程处理其中一份
8. 跑过后的数据保存下来，以后再次调用时可以直接使用，无需再次划分
9. 效果：
10.   两千万的数据遍历一次大约需要30分钟
11.   将数据划分成64份，使用32线程分别处理，只需5分钟
12.   对于需要进行全表查询的语句可以显著提高速度，对于不需要全表查询的建议使用索引
